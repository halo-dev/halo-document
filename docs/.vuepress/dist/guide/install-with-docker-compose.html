<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用 Docker-compose 部署 Halo | Halo</title>
    <meta name="description" content="Halo | ✍️ 一款现代化的个人独立博客系统">
    <link rel="icon" href="/halo.png">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="gRZYnaYWUQXWLvov-54i4W4-SdWlhwJt46uHU2q0eIs">
    
    <link rel="preload" href="/assets/css/0.styles.a7ea7e8a.css" as="style"><link rel="preload" href="/assets/js/app.84607544.js" as="script"><link rel="preload" href="/assets/js/2.9f0d8ef4.js" as="script"><link rel="preload" href="/assets/js/26.30b2e524.js" as="script"><link rel="preload" href="/assets/js/6.00a0d661.js" as="script"><link rel="prefetch" href="/assets/js/10.3a05575b.js"><link rel="prefetch" href="/assets/js/11.11b31e3a.js"><link rel="prefetch" href="/assets/js/12.0fef56b6.js"><link rel="prefetch" href="/assets/js/13.6dbc057b.js"><link rel="prefetch" href="/assets/js/14.4e86515a.js"><link rel="prefetch" href="/assets/js/15.b02174f7.js"><link rel="prefetch" href="/assets/js/16.0a47cf5d.js"><link rel="prefetch" href="/assets/js/17.f778b11a.js"><link rel="prefetch" href="/assets/js/18.6a7fa121.js"><link rel="prefetch" href="/assets/js/19.ea025cc7.js"><link rel="prefetch" href="/assets/js/20.75f865ae.js"><link rel="prefetch" href="/assets/js/21.3f1de4d5.js"><link rel="prefetch" href="/assets/js/22.1947ba12.js"><link rel="prefetch" href="/assets/js/23.d4357614.js"><link rel="prefetch" href="/assets/js/24.303ef428.js"><link rel="prefetch" href="/assets/js/25.d1dbcaec.js"><link rel="prefetch" href="/assets/js/27.526e4907.js"><link rel="prefetch" href="/assets/js/28.c79c9083.js"><link rel="prefetch" href="/assets/js/29.2b709d32.js"><link rel="prefetch" href="/assets/js/3.bde2e93a.js"><link rel="prefetch" href="/assets/js/30.10371f6a.js"><link rel="prefetch" href="/assets/js/31.d1bf17e2.js"><link rel="prefetch" href="/assets/js/32.5cce4439.js"><link rel="prefetch" href="/assets/js/4.70ad8bf7.js"><link rel="prefetch" href="/assets/js/5.8f7a0ffc.js"><link rel="prefetch" href="/assets/js/7.c8c26743.js"><link rel="prefetch" href="/assets/js/8.36e08a8b.js"><link rel="prefetch" href="/assets/js/9.a4da83dd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a7ea7e8a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Halo</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首 页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">用户文档</a></div><div class="nav-item"><a href="/develop/application/structure.html" class="nav-link">开发文档</a></div><div class="nav-item"><a href="/theme/" class="nav-link">主题仓库</a></div><div class="nav-item"><a href="https://bbs.halo.run" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社 区
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/halo-dev/halo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首 页</a></div><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">用户文档</a></div><div class="nav-item"><a href="/develop/application/structure.html" class="nav-link">开发文档</a></div><div class="nav-item"><a href="/theme/" class="nav-link">主题仓库</a></div><div class="nav-item"><a href="https://bbs.halo.run" target="_blank" rel="noopener noreferrer" class="nav-link external">
  社 区
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/halo-dev/halo" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>安装指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/migrate-from-0.4.4.html" class="sidebar-link">从 0.4.4 迁移</a></li><li><a href="/guide/install-with-centos.html" class="sidebar-link">使用 CentOS 部署 Halo</a></li><li><a href="/guide/install-with-docker.html" class="sidebar-link">使用 Docker 部署 Halo</a></li><li><a href="/guide/reverse-proxy.html" class="sidebar-link">配置域名访问</a></li><li><a href="/guide/install-with-docker-compose.html" class="active sidebar-link">使用 Docker-compose 部署 Halo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/install-with-docker-compose.html#环境要求" class="sidebar-link">环境要求</a></li><li class="sidebar-sub-header"><a href="/guide/install-with-docker-compose.html#服务器配置" class="sidebar-link">服务器配置</a></li><li class="sidebar-sub-header"><a href="/guide/install-with-docker-compose.html#安装-halo" class="sidebar-link">安装 Halo</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>FAQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/faq.html" class="sidebar-link">常见问题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>捐赠</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/donate.html" class="sidebar-link">捐赠记录</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="使用-docker-compose-部署-halo"><a href="#使用-docker-compose-部署-halo" aria-hidden="true" class="header-anchor">#</a> 使用 Docker-compose 部署 Halo</h1> <p>使用 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer"><code>Docker Compose</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 部署 <code>Halo</code> 的指南，假设你了解并使用过 <a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer"><code>Docker</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer"><code>Docker Compose</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。本篇教程以 <code>CentOS 7.x</code> 为例，其他系统大同小异。</p> <h2 id="环境要求"><a href="#环境要求" aria-hidden="true" class="header-anchor">#</a> 环境要求</h2> <p>为了在使用过程中不出现意外的事故，给出下列推荐的配置</p> <ul><li>1G RAM 的服务器</li></ul> <p>在开始之前，最好先到域名服务商解析域名，设置 A 记录并指向服务器的 IP 地址，并确保已经正确解析以及没有被工信部拦截（国内服务器需备案），你可以在本地使用 Ping 命令检查域名是否已经正确解析到了服务器的 IP 地址。以方便在安装过程中为域名配置 SSL 证书。</p> <h2 id="服务器配置"><a href="#服务器配置" aria-hidden="true" class="header-anchor">#</a> 服务器配置</h2> <h3 id="更新软件包"><a href="#更新软件包" aria-hidden="true" class="header-anchor">#</a> 更新软件包</h3> <p>请确保服务器的软件包已经是最新的。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> yum update -y
</code></pre></div><h3 id="配置-docker-运行环境"><a href="#配置-docker-运行环境" aria-hidden="true" class="header-anchor">#</a> 配置 Docker 运行环境</h3> <p>请参考 <a href="/guide/install-with-docker.html#服务器配置">使用 Docker 部署 Halo</a></p> <h3 id="配置-docker-compose"><a href="#配置-docker-compose" aria-hidden="true" class="header-anchor">#</a> 配置 Docker Compose</h3> <p>请参考 <a href="http://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose | Docker Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div><ins data-ad-layout="in-article" data-ad-client="ca-pub-5271828906478846" data-ad-slot="2656935500" data-ad-format="fluid" class="adsbygoogle" style="display:block;text-align:center;"></ins></div> <h2 id="安装-halo"><a href="#安装-halo" aria-hidden="true" class="header-anchor">#</a> 安装 Halo</h2> <h3 id="下载配置文件"><a href="#下载配置文件" aria-hidden="true" class="header-anchor">#</a> 下载配置文件</h3> <p>考虑到部分用户的需要，可能需要自定义比如端口等设置项，我们提供了公共的配置文件，并且该配置文件是完全独立于安装包的。当然，你也可以使用安装包内的默认配置文件，但是安装包内的配置文件是不可修改的。请注意：配置文件的路径为 <code>~/.halo/application.yaml</code>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 下载配置文件到 ~/.halo 目录</span>
<span class="token function">curl</span> -o ~/.halo/application.yaml --create-dirs https://raw.githubusercontent.com/halo-dev/halo-common/master/application-template.yaml
</code></pre></div><h3 id="修改配置文件"><a href="#修改配置文件" aria-hidden="true" class="header-anchor">#</a> 修改配置文件</h3> <p>完成上一步操作，我们就可以自己配置 Halo 的运行端口，以及数据库相关的配置了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 使用 Vim 工具修改配置文件</span>
<span class="token function">vim</span> ~/.halo/application.yaml
</code></pre></div><p>打开之后我们可以看到</p> <ul><li>H2 配置如下：</li></ul> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8090</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> com.zaxxer.hikari.HikariDataSource

    <span class="token comment"># H2 Database 配置</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.h2.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>h2<span class="token punctuation">:</span>file<span class="token punctuation">:</span>~/halo/db/halo
    <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
    <span class="token key atrule">password</span><span class="token punctuation">:</span> openadmin
  <span class="token key atrule">h2</span><span class="token punctuation">:</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span>
      <span class="token key atrule">settings</span><span class="token punctuation">:</span>
        <span class="token key atrule">web-allow-others</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">path</span><span class="token punctuation">:</span> /h2<span class="token punctuation">-</span>console
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre></div><ul><li>MySQL 配置如下：</li></ul> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8090</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token comment"># MySQL 配置</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/halodb<span class="token punctuation">?</span>characterEncoding=utf8<span class="token important">&amp;useSSL</span>=false<span class="token important">&amp;serverTimezone</span>=Asia/Shanghai
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> openroot
</code></pre></div><ol><li>如果需要自定义端口，修改 <code>server</code> 节点下的 <code>port</code> 即可。</li> <li>默认使用的是 <code>H2 Database</code> 数据库，这是一种嵌入式的数据库，使用起来非常方便。需要注意的是，默认的用户名和密码为 <code>admin</code> 和 <code>123456</code>，这个是自定义的，最好将其修改，并妥善保存。</li> <li>如果需要使用 <code>MySQL</code> 数据库，需要将 <code>H2 Database</code> 的所有相关配置都注释掉，并取消 <code>MySQL</code> 的相关配置。另外，<code>MySQL</code> 的默认数据库名为 <code>halodb</code>，请自行配置 <code>MySQL</code> 并创建数据库，以及修改配置文件中的用户名和密码。</li> <li><code>h2</code> 节点为 <code>H2 Database</code> 的控制台配置，默认是关闭的，如需使用请将 <code>h2.console.settings.web-allow-others</code> 和 <code>h2.console.enabled</code> 设置为 <code>true</code>。控制台地址即为 <code>域名/h2-console</code>。注意：非紧急情况，不建议开启该配置。</li></ol> <h3 id="下载-docker-compose-配置文件"><a href="#下载-docker-compose-配置文件" aria-hidden="true" class="header-anchor">#</a> 下载 Docker Compose 配置文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> -y <span class="token function">wget</span> <span class="token operator">&amp;&amp;</span> <span class="token function">wget</span> -O docker-compose.yaml https://raw.githubusercontent.com/halo-dev/halo-common/master/docker-compose.yaml
</code></pre></div><h3 id="修改-docker-compose-文件"><a href="#修改-docker-compose-文件" aria-hidden="true" class="header-anchor">#</a> 修改 Docker Compose 文件</h3> <p>假设你现在已经下载好了 docker-compose.yaml 文件，那么在部署之前需要做的就是简单修改以下这个文件。因为我们需要绑定域名以申请 SSL 证书，所以你需要在 docker-compose.yaml 文件中修改以下配置：</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">halo</span><span class="token punctuation">:</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">image</span><span class="token punctuation">:</span> ruibaby/halo
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> halo
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 8090<span class="token punctuation">:</span><span class="token number">8090</span>
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> VIRTUAL_PORT=8090
    <span class="token punctuation">-</span> VIRTUAL_HOST=localhost  <span class="token comment"># 监听的地址（务必修改）</span>
    <span class="token punctuation">-</span> LETSENCRYPT_HOST=localhost <span class="token comment"># 证书的域名 （务必修改）</span>
    <span class="token punctuation">-</span> LETSENCRYPT_EMAIL=i@example.com <span class="token comment"># 证书所有者的邮箱，快过期时会提醒（务必修改）</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ~/.halo<span class="token punctuation">:</span>/root/.halo
</code></pre></div><p>参考配置：</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">halo</span><span class="token punctuation">:</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">image</span><span class="token punctuation">:</span> ruibaby/halo
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> halo
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 8090<span class="token punctuation">:</span><span class="token number">8090</span>
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> VIRTUAL_PORT=8090
    <span class="token punctuation">-</span> VIRTUAL_HOST=blog.ryanc.cc
    <span class="token punctuation">-</span> LETSENCRYPT_HOST=blog.ryanc.cc
    <span class="token punctuation">-</span> LETSENCRYPT_EMAIL=i@ryanc.cc
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ~/.halo<span class="token punctuation">:</span>/root/.halo
</code></pre></div><p>如上配置，我们需要修改 <code>VIRTUAL_HOST</code> , <code>LETSENCRYPT_HOST</code> 为自己的域名，<strong>注意注意注意！</strong>，在部署之前最好先将外网 IP 解析到域名，因为申请 SSL 证书需要域名可以正常访问。另外，<code>LETSENCRYPT_EMAIL</code> 这个节点是证书申请者的邮箱，当证书要过期的时候，会提醒你续签。</p> <h3 id="下载配置文件模板"><a href="#下载配置文件模板" aria-hidden="true" class="header-anchor">#</a> 下载配置文件模板</h3> <p>因为要涉及到 Nginx 反向代理，所以我们需要使用模板生成一个 Nginx 的配置文件，以配置好需要代理的地址以及后面 SSL 证书的配置。这个模板人家已经写好了，所以我们直接下载下来即可，下载下来我们就不需要管了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> /etc <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> nginx

<span class="token function">curl</span> https://raw.githubusercontent.com/jwilder/nginx-proxy/master/nginx.tmpl <span class="token operator">&gt;</span> /etc/nginx/nginx.tmpl
</code></pre></div><h3 id="运行"><a href="#运行" aria-hidden="true" class="header-anchor">#</a> 运行</h3> <p>如果你顺利进行了上面所述步骤，那么已经离成功不远了，现在我们只需要执行一条命令即可完成 Halo 的部署。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>docker-compose up -d
</code></pre></div><h3 id="版本更新"><a href="#版本更新" aria-hidden="true" class="header-anchor">#</a> 版本更新</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 拉取最新的 Halo 镜像</span>
docker-compose pull

<span class="token comment"># 重新构建容器</span>
docker-compose up -d
</code></pre></div><h3 id="常用命令"><a href="#常用命令" aria-hidden="true" class="header-anchor">#</a> 常用命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 停止容器运行</span>
docker-compose stop

<span class="token comment"># 启动容器</span>
docker-compose start

<span class="token comment"># 重启容器</span>
docker-compose restart
</code></pre></div><h3 id="注意事项"><a href="#注意事项" aria-hidden="true" class="header-anchor">#</a> 注意事项</h3> <ol><li>最好提前解析好 IP，绑定域名。</li> <li>运行完成之后可能得等几分钟，HTTPS 才会配置好，如果不能访问属正常现象，等待几分钟就可以看到 Halo 安装的界面了。</li> <li>Docker 镜像使用的是 H2 数据库，所以不需要你自己安装，服务启动就可以自动创建了。</li></ol> <div><ins data-ad-layout="in-article" data-ad-client="ca-pub-5271828906478846" data-ad-slot="2656935500" data-ad-format="fluid" class="adsbygoogle" style="display:block;text-align:center;"></ins></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/halo-dev/halo-document/edit/master/guide/install-with-docker-compose.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/guide/reverse-proxy.html" class="prev">
          配置域名访问
        </a></span> <span class="next"><a href="/guide/faq.html">
          常见问题
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.84607544.js" defer></script><script src="/assets/js/2.9f0d8ef4.js" defer></script><script src="/assets/js/26.30b2e524.js" defer></script><script src="/assets/js/6.00a0d661.js" defer></script>
  </body>
</html>
